# ----------------------------------------------------------------------
# LinkedIn Automation Campaign
# Name: Connect + Wait + Follow-up Message
# This is the most common outreach sequence in 2025
# ----------------------------------------------------------------------
campaign_name: linked_in_connect_follow_up

# ----------------------------------------------------------------------
# Steps are executed in order, top to bottom
# Each step has:
#   - step_type: scrape | action | condition
#   - handler: dotted path to the actual Python function
#   - type-specific parameters (strictly validated)
# ----------------------------------------------------------------------
steps:

  # ------------------------------------------------------------------
  # 1. SCRAPE: Read LinkedIn URLs and enrich with full profile data
  # ------------------------------------------------------------------
  - step_type: scrape
    handler: linkedin.actions.profile.get_profiles               # Function that reads URLs → returns enriched profiles
    scrape:
      input_csv: ./assets/inputs/urls.csv                         # Your list of raw LinkedIn profile URLs (one per row)
      output_csv: ./assets/output/enriched_profiles_{timestamp}.csv   # Optional: saves enriched data for debugging/restarts

  # ------------------------------------------------------------------
  # 2. ACTION: Send personalized connection request
  # ------------------------------------------------------------------
  - step_type: action
    handler: linkedin.actions.connect.connect                     # The actual connect function
    action:
      template_file: ./assets/templates/connect_notes/leader.j2   # Jinja2 template for the connection note
      template_type: jinja                                        # Options: static | jinja | ai_prompt

  # ------------------------------------------------------------------
  # 3. CONDITION: Wait until the person accepts the connection
  #     Will poll every `check_interval` until `timeout` is reached
  #     If timeout → skip to next profile (or fail, depending on engine)
  # ------------------------------------------------------------------
  - step_type: condition
    handler: linkedin.actions.connections.is_connection_accepted # Function must return True/False
    condition:
      timeout: 14d                                                  # Max wait time (14 days is LinkedIn's sweet spot)
      check_interval: 6h                                            # How often to check (6 hours = safe & respectful)

  # ------------------------------------------------------------------
  # 4. ACTION: Send the follow-up message (only if accepted)
  # ------------------------------------------------------------------
  - step_type: action
    handler: linkedin.actions.message.send_message                # Your message sender
    action:
      template_file: ./assets/templates/prompts/followup_prompt.j2 # Can be a prompt sent to LLM first
      template_type: ai_prompt                                      # static | jinja | ai_prompt (LLM-generated message)

# ----------------------------------------------------------------------
# GLOBAL SETTINGS (applied to the entire campaign run)
# ----------------------------------------------------------------------
settings:
  limits:
    # Stay under LinkedIn's aggressive detection thresholds (2025 values)
    daily_connections: 50       # Max new invites per day per account
    daily_messages: 20          # Max follow-up messages per day

  delays:
    # Random human-like delays between actions (in seconds)
    delay_min: 5
    delay_max: 15

# ----------------------------------------------------------------------
# Tips for safe scaling:
# - Start with 30–40 connections/day if account is new/warm
# - Never exceed 80 connections + 30 messages on aged accounts
# - Always use high-quality residential proxies + browser fingerprint spoofing
# ----------------------------------------------------------------------